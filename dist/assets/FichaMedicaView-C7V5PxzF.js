import{c as ye,b as p,o as l,e as a,j as u,d as t,f as e,H as O,t as x,K as X,h as k,k as $,_ as M,F as D,g as B,n as j,X as R,i as U,r as w,O as N,a as fe,m as xe,y as be,B as te}from"./index-azXm5qWK.js";import{a as J,s as _e,g as se,u as he}from"./useMedicalRecord-cQ5zGB1N.js";import{S as $e,u as we}from"./useMedicationInteractions-v7y8pgmQ.js";import{_ as ae}from"./BaseAlert-CrdZ_00x.js";import{_ as S}from"./BaseCard-CuGf3w1A.js";import{P as Q,B as ke}from"./pill-UXmC0b2A.js";import{D as oe}from"./droplet-BKoENw9Q.js";import{P as W}from"./plus-Vr9vRiuN.js";import{_ as E}from"./BaseInput-B5gqF_3A.js";import{P as Ce}from"./phone-CzlT2lzC.js";import{I as Ve}from"./info-D5aF7pvg.js";import{B as Y}from"./BaseModal-DMUDUi05.js";import{S as Ae}from"./search-BuxddGum.js";import{C as le}from"./check-BYW5gYeV.js";import{C as Me}from"./chevron-down-BTLLF8Jm.js";import{A as Se}from"./activity-C-q0REzk.js";const Te=ye("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),De={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},Be={class:"flex items-center gap-3"},je={class:"w-10 h-10 rounded-lg bg-teal-100 flex items-center justify-center"},Ue={class:"text-2xl font-bold text-gray-900"},Ee={class:"flex items-center gap-3"},qe={class:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center"},ze={class:"text-2xl font-bold text-gray-900"},Ne={class:"flex items-center gap-3"},Le={class:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center"},Ie={class:"text-2xl font-bold text-gray-900"},Oe={class:"flex items-center gap-3"},Re={class:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center"},Pe={class:"text-2xl font-bold text-gray-900"},Fe={__name:"MedicalRecordStats",props:{stats:{type:Object,required:!0},bloodType:{type:String,default:""}},setup(g){return(m,r)=>(l(),p("div",De,[a(e(S),{class:"!p-4"},{default:u(()=>[t("div",Be,[t("div",je,[a(e(O),{class:"w-5 h-5 text-teal-600"})]),t("div",null,[t("p",Ue,x(g.stats.totalDiseases),1),r[0]||(r[0]=t("p",{class:"text-xs text-gray-500"},"Condições",-1))])])]),_:1}),a(e(S),{class:"!p-4"},{default:u(()=>[t("div",Ee,[t("div",qe,[a(e(Q),{class:"w-5 h-5 text-blue-600"})]),t("div",null,[t("p",ze,x(g.stats.totalMedications),1),r[1]||(r[1]=t("p",{class:"text-xs text-gray-500"},"Medicamentos",-1))])])]),_:1}),a(e(S),{class:"!p-4"},{default:u(()=>[t("div",Ne,[t("div",Le,[a(e(X),{class:"w-5 h-5 text-orange-600"})]),t("div",null,[t("p",Ie,x(g.stats.totalAllergies),1),r[2]||(r[2]=t("p",{class:"text-xs text-gray-500"},"Alergias",-1))])])]),_:1}),a(e(S),{class:"!p-4"},{default:u(()=>[t("div",Oe,[t("div",Re,[a(e(oe),{class:"w-5 h-5 text-red-600"})]),t("div",null,[t("p",Pe,x(g.bloodType||"-"),1),r[3]||(r[3]=t("p",{class:"text-xs text-gray-500"},"Tipo Sanguíneo",-1))])])]),_:1})]))}},Ge={class:"flex items-center justify-between"},He={class:"flex items-center gap-2"},Ke={key:0,class:"text-center py-8"},Xe={key:1,class:"space-y-2"},Je={class:"flex items-center gap-3"},Qe={class:"font-medium text-gray-900"},We={class:"text-xs text-gray-500"},Ye=["onClick"],Ze={__name:"ConditionsList",props:{diseases:{type:Array,required:!0}},emits:["add","remove"],setup(g,{emit:m}){const r=m,c={mental:"purple",cardiovascular:"red",respiratory:"blue",endocrine:"orange",neurological:"indigo",musculoskeletal:"green",gastrointestinal:"yellow",dermatological:"pink",immunological:"teal",other:"gray"},o=n=>{const s={purple:"bg-teal-100",red:"bg-red-100",blue:"bg-blue-100",orange:"bg-orange-100",indigo:"bg-indigo-100",green:"bg-green-100",yellow:"bg-yellow-100",pink:"bg-pink-100",teal:"bg-teal-100",gray:"bg-gray-100"};return s[c[n]]||s.gray},i=n=>J.find(s=>s.id===n)?.label||"";return(n,s)=>(l(),k(e(S),null,{header:u(()=>[t("div",Ge,[t("div",He,[a(e(O),{class:"w-5 h-5 text-teal-500"}),s[2]||(s[2]=t("h2",{class:"text-lg font-semibold text-gray-900"}," Condições de Saúde ",-1))]),a(e(M),{variant:"primary",size:"sm",onClick:s[0]||(s[0]=d=>r("add"))},{"icon-left":u(()=>[a(e(W),{class:"w-4 h-4"})]),default:u(()=>[s[3]||(s[3]=$(" Adicionar ",-1))]),_:1})])]),default:u(()=>[g.diseases.length===0?(l(),p("div",Ke,[a(e(O),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s[5]||(s[5]=t("p",{class:"text-gray-500 mb-4"},"Nenhuma condição cadastrada",-1)),a(e(M),{variant:"outline",onClick:s[1]||(s[1]=d=>r("add"))},{default:u(()=>[...s[4]||(s[4]=[$(" Adicionar condição ",-1)])]),_:1})])):(l(),p("div",Xe,[(l(!0),p(D,null,B(g.diseases,d=>(l(),p("div",{key:d.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",Je,[t("div",{class:j(["w-2 h-2 rounded-full",o(d.category)])},null,2),t("div",null,[t("p",Qe,x(d.name),1),t("p",We,x(d.code)+" - "+x(i(d.category)),1)])]),t("button",{onClick:y=>r("remove",d),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors"},[a(e(R),{class:"w-4 h-4"})],8,Ye)]))),128))]))]),_:1}))}},et={class:"flex items-center justify-between"},tt={class:"flex items-center gap-2"},st={key:0,class:"text-center py-8"},at={key:1,class:"space-y-2"},lt={class:"font-medium text-gray-900"},ot={class:"text-sm text-gray-500"},nt={key:0},dt={key:1},rt={key:2},it=["onClick"],ut={__name:"MedicationsList",props:{medications:{type:Array,default:()=>[]}},emits:["add","remove"],setup(g,{emit:m}){const r=m;return(c,o)=>(l(),k(e(S),null,{header:u(()=>[t("div",et,[t("div",tt,[a(e(Q),{class:"w-5 h-5 text-blue-500"}),o[1]||(o[1]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Medicamentos",-1))]),a(e(M),{variant:"primary",size:"sm",onClick:o[0]||(o[0]=i=>r("add"))},{"icon-left":u(()=>[a(e(W),{class:"w-4 h-4"})]),default:u(()=>[o[2]||(o[2]=$(" Adicionar ",-1))]),_:1})])]),default:u(()=>[g.medications.length===0?(l(),p("div",st,[a(e(Q),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"}),o[3]||(o[3]=t("p",{class:"text-gray-500"},"Nenhum medicamento cadastrado",-1))])):(l(),p("div",at,[(l(!0),p(D,null,B(g.medications,i=>(l(),p("div",{key:i.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",null,[t("p",lt,x(i.name),1),t("p",ot,[i.dosage?(l(),p("span",nt,x(i.dosage),1)):U("",!0),i.dosage&&i.frequency?(l(),p("span",dt," - ")):U("",!0),i.frequency?(l(),p("span",rt,x(i.frequency),1)):U("",!0)])]),t("button",{onClick:n=>r("remove",i.id),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors"},[a(e(R),{class:"w-4 h-4"})],8,it)]))),128))]))]),_:1}))}},ct={class:"flex items-center justify-between"},mt={class:"flex items-center gap-2"},gt={key:0,class:"text-center py-8"},vt={key:1,class:"space-y-2"},pt={class:"flex items-center gap-3"},yt={class:"font-medium text-gray-900"},ft=["onClick"],xt={__name:"AllergiesList",props:{allergies:{type:Array,default:()=>[]}},emits:["add","remove"],setup(g,{emit:m}){const r=m,c=i=>{const n={mild:"bg-green-100 text-green-700",moderate:"bg-yellow-100 text-yellow-700",severe:"bg-red-100 text-red-700"};return n[i]||n.moderate},o=i=>({mild:"Leve",moderate:"Moderada",severe:"Grave"})[i]||"Moderada";return(i,n)=>(l(),k(e(S),null,{header:u(()=>[t("div",ct,[t("div",mt,[a(e(X),{class:"w-5 h-5 text-orange-500"}),n[1]||(n[1]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Alergias",-1))]),a(e(M),{variant:"primary",size:"sm",onClick:n[0]||(n[0]=s=>r("add"))},{"icon-left":u(()=>[a(e(W),{class:"w-4 h-4"})]),default:u(()=>[n[2]||(n[2]=$(" Adicionar ",-1))]),_:1})])]),default:u(()=>[g.allergies.length===0?(l(),p("div",gt,[a(e(X),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n[3]||(n[3]=t("p",{class:"text-gray-500"},"Nenhuma alergia cadastrada",-1))])):(l(),p("div",vt,[(l(!0),p(D,null,B(g.allergies,s=>(l(),p("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[t("div",pt,[t("span",{class:j(["px-2 py-1 text-xs font-medium rounded-full",c(s.severity)])},x(o(s.severity)),3),t("p",yt,x(s.name),1)]),t("button",{onClick:d=>r("remove",s.id),class:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors"},[a(e(R),{class:"w-4 h-4"})],8,ft)]))),128))]))]),_:1}))}},bt={class:"flex items-center gap-2"},_t={class:"flex flex-wrap gap-2 mb-4"},ht=["onClick"],$t={__name:"BloodTypeCard",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","save"],setup(g,{emit:m}){const r=g,c=m,o=["A+","A-","B+","B-","AB+","AB-","O+","O-"],i=w(r.modelValue);N(()=>r.modelValue,d=>{i.value=d});const n=d=>{i.value=d,c("update:modelValue",d)},s=()=>{c("save",i.value)};return(d,y)=>(l(),k(e(S),null,{header:u(()=>[t("div",bt,[a(e(oe),{class:"w-5 h-5 text-red-500"}),y[0]||(y[0]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Tipo Sanguíneo",-1))])]),default:u(()=>[t("div",_t,[(l(),p(D,null,B(o,h=>t("button",{key:h,onClick:V=>n(h),class:j(["px-4 py-2 rounded-lg font-medium transition-all",i.value===h?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},x(h),11,ht)),64))]),a(e(M),{variant:"secondary",size:"sm",onClick:s,disabled:i.value===g.modelValue},{default:u(()=>[...y[1]||(y[1]=[$(" Salvar ",-1)])]),_:1},8,["disabled"])]),_:1}))}},wt={class:"flex items-center gap-2"},kt={class:"space-y-3"},Ct={__name:"EmergencyContactCard",props:{contact:{type:Object,default:()=>({name:"",phone:"",relationship:""})}},emits:["save"],setup(g,{emit:m}){const r=g,c=m,o=w({...r.contact});N(()=>r.contact,n=>{o.value={...n}},{deep:!0});const i=()=>{c("save",{...o.value})};return(n,s)=>(l(),k(e(S),null,{header:u(()=>[t("div",wt,[a(e(Ce),{class:"w-5 h-5 text-green-500"}),s[3]||(s[3]=t("h2",{class:"text-lg font-semibold text-gray-900"}," Contato de Emergência ",-1))])]),default:u(()=>[t("div",kt,[a(e(E),{modelValue:o.value.name,"onUpdate:modelValue":s[0]||(s[0]=d=>o.value.name=d),label:"Nome",placeholder:"Nome do contato"},null,8,["modelValue"]),a(e(E),{modelValue:o.value.phone,"onUpdate:modelValue":s[1]||(s[1]=d=>o.value.phone=d),label:"Telefone",placeholder:"(00) 00000-0000"},null,8,["modelValue"]),a(e(E),{modelValue:o.value.relationship,"onUpdate:modelValue":s[2]||(s[2]=d=>o.value.relationship=d),label:"Parentesco",placeholder:"Ex: Mãe, Cônjuge, Amigo"},null,8,["modelValue"]),a(e(M),{variant:"secondary",size:"sm",onClick:i},{default:u(()=>[...s[4]||(s[4]=[$(" Salvar ",-1)])]),_:1})])]),_:1}))}},Vt={class:"flex items-center gap-2"},At=["value"],Mt={__name:"MedicalNotesCard",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","save"],setup(g,{emit:m}){const r=g,c=m,o=w(r.modelValue);N(()=>r.modelValue,s=>{o.value=s});const i=s=>{o.value=s.target.value,c("update:modelValue",o.value)},n=()=>{c("save",o.value)};return(s,d)=>(l(),k(e(S),null,{header:u(()=>[t("div",Vt,[a(e(Te),{class:"w-5 h-5 text-gray-500"}),d[0]||(d[0]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Observações Médicas",-1))])]),default:u(()=>[t("textarea",{value:o.value,onInput:i,rows:"4",class:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent resize-none",placeholder:"Informações adicionais sobre sua saúde, histórico familiar, etc."},null,40,At),a(e(M),{variant:"secondary",size:"sm",class:"mt-3",onClick:n},{default:u(()=>[...d[1]||(d[1]=[$(" Salvar observações ",-1)])]),_:1})]),_:1}))}},St={key:0,class:"space-y-3"},Tt={class:"flex items-center gap-2 text-amber-700"},Dt={class:"px-2 py-0.5 text-xs font-medium bg-amber-100 text-amber-700 rounded-full"},Bt={class:"flex items-start justify-between gap-3"},jt={class:"flex-1"},Ut={class:"flex items-center gap-2 mb-1"},Et={class:"text-sm font-medium text-gray-900"},qt={class:"text-sm text-gray-700 mb-2"},zt={class:"text-xs text-gray-600 flex items-center gap-1"},Nt=["onClick"],Lt={__name:"MedicationInteractionAlerts",props:{alerts:{type:Array,required:!0},alertCount:{type:Number,required:!0}},emits:["acknowledge"],setup(g,{emit:m}){const r=m,c=o=>({high:"Alto Risco",moderate:"Risco Moderado",low:"Baixo Risco"})[o]||"Risco";return(o,i)=>g.alerts.length>0?(l(),p("div",St,[t("div",Tt,[a(e($e),{class:"w-5 h-5"}),i[0]||(i[0]=t("h2",{class:"font-semibold"},"Alertas de Interação Medicamentosa",-1)),t("span",Dt,x(g.alertCount),1)]),(l(!0),p(D,null,B(g.alerts,n=>(l(),p("div",{key:n.id,class:j(["p-4 rounded-xl border-l-4",n.severity==="high"?"bg-red-50 border-red-500":n.severity==="moderate"?"bg-amber-50 border-amber-500":"bg-blue-50 border-blue-500"])},[t("div",Bt,[t("div",jt,[t("div",Ut,[t("span",{class:j(["px-2 py-0.5 text-xs font-medium rounded-full",n.severity==="high"?"bg-red-100 text-red-700":n.severity==="moderate"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"])},x(c(n.severity)),3),t("span",Et,x(n.medications?.join(" + ")),1)]),t("p",qt,x(n.description),1),t("p",zt,[a(e(Ve),{class:"w-3 h-3"}),$(" "+x(n.recommendation),1)])]),t("button",{onClick:s=>r("acknowledge",n.id),class:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-white rounded-lg transition-colors",title:"Marcar como lido"},[a(e(R),{class:"w-4 h-4"})],8,Nt)])],2))),128))])):U("",!0)}},It={class:"space-y-4"},Ot={key:0,class:"space-y-2 max-h-60 overflow-y-auto"},Rt=["onClick","disabled"],Pt={class:"font-medium text-gray-900"},Ft={class:"text-xs text-gray-500"},Gt={key:1,class:"space-y-2"},Ht=["onClick"],Kt={class:"flex items-center gap-2"},Xt={class:"font-medium text-gray-900"},Jt={class:"text-xs text-gray-500"},Qt={key:0,class:"p-2 space-y-1 max-h-48 overflow-y-auto"},Wt=["onClick","disabled"],Yt={__name:"AddConditionModal",props:{modelValue:{type:Boolean,default:!1},selectedDiseases:{type:Array,default:()=>[]}},emits:["update:modelValue","add"],setup(g,{emit:m}){const r=g,c=m,o=w(""),i=w(["mental"]),n=fe(()=>o.value.length<2?[]:_e(o.value).slice(0,10)),s=V=>{const _=i.value.indexOf(V);_>-1?i.value.splice(_,1):i.value.push(V)},d=V=>{c("add",V),o.value=""},y=V=>r.selectedDiseases.some(_=>typeof _=="string"?_===V:_?.cidCode===V||_?.cid_code===V),h=()=>{c("update:modelValue",!1)};return(V,_)=>(l(),k(e(Y),{"model-value":g.modelValue,"onUpdate:modelValue":_[1]||(_[1]=b=>c("update:modelValue",b)),title:"Adicionar Condição de Saúde",size:"lg"},{footer:u(()=>[a(e(M),{variant:"secondary",onClick:h},{default:u(()=>[..._[3]||(_[3]=[$(" Fechar ",-1)])]),_:1})]),default:u(()=>[t("div",It,[a(e(E),{modelValue:o.value,"onUpdate:modelValue":_[0]||(_[0]=b=>o.value=b),placeholder:"Buscar por nome ou código CID..."},{"icon-left":u(()=>[a(e(Ae),{class:"w-5 h-5"})]),_:1},8,["modelValue"]),n.value.length>0?(l(),p("div",Ot,[(l(!0),p(D,null,B(n.value,b=>(l(),p("button",{key:b.id,onClick:A=>d(b),disabled:y(b.id),class:j(["w-full flex items-center justify-between p-3 rounded-lg text-left transition-all",y(b.id)?"bg-green-50 border-2 border-green-200":"bg-gray-50 hover:bg-teal-50 hover:border-teal-200 border-2 border-transparent"])},[t("div",null,[t("p",Pt,x(b.name),1),t("p",Ft,x(b.code)+" - "+x(e(J).find(A=>A.id===b.category)?.label),1)]),y(b.id)?(l(),k(e(le),{key:0,class:"w-5 h-5 text-green-500"})):U("",!0)],10,Rt))),128))])):(l(),p("div",Gt,[_[2]||(_[2]=t("p",{class:"text-sm text-gray-500 mb-3"},"Ou selecione por categoria:",-1)),(l(!0),p(D,null,B(e(J),b=>(l(),p("div",{key:b.id,class:"border border-gray-200 rounded-lg overflow-hidden"},[t("button",{onClick:A=>s(b.id),class:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 transition-colors"},[t("div",Kt,[b.id==="mental"?(l(),k(e(ke),{key:0,class:"w-5 h-5 text-teal-500"})):(l(),k(e(O),{key:1,class:"w-5 h-5 text-red-500"})),t("span",Xt,x(b.label),1),t("span",Jt,"("+x(e(se)(b.id).length)+")",1)]),a(e(Me),{class:j(["w-5 h-5 text-gray-400 transition-transform",i.value.includes(b.id)?"rotate-180":""])},null,8,["class"])],8,Ht),i.value.includes(b.id)?(l(),p("div",Qt,[(l(!0),p(D,null,B(e(se)(b.id),A=>(l(),p("button",{key:A.id,onClick:Z=>d(A),disabled:y(A.id),class:j(["w-full flex items-center justify-between p-2 rounded-lg text-left text-sm transition-all",y(A.id)?"bg-green-50 text-green-700":"hover:bg-teal-50"])},[t("span",null,x(A.name),1),y(A.id)?(l(),k(e(le),{key:0,class:"w-4 h-4 text-green-500"})):U("",!0)],10,Wt))),128))])):U("",!0)]))),128))]))])]),_:1},8,["model-value"]))}},Zt={class:"space-y-4"},es={__name:"AddMedicationModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","add"],setup(g,{emit:m}){const r=m,c=w({name:"",dosage:"",frequency:""}),o=()=>{c.value.name.trim()&&(r("add",{...c.value}),c.value={name:"",dosage:"",frequency:""},r("update:modelValue",!1))},i=()=>{r("update:modelValue",!1)};return(n,s)=>(l(),k(e(Y),{"model-value":g.modelValue,"onUpdate:modelValue":s[3]||(s[3]=d=>r("update:modelValue",d)),title:"Adicionar Medicamento",size:"sm"},{footer:u(()=>[a(e(M),{variant:"secondary",onClick:i},{default:u(()=>[...s[4]||(s[4]=[$(" Cancelar ",-1)])]),_:1}),a(e(M),{variant:"primary",onClick:o,disabled:!c.value.name.trim()},{default:u(()=>[...s[5]||(s[5]=[$(" Adicionar ",-1)])]),_:1},8,["disabled"])]),default:u(()=>[t("div",Zt,[a(e(E),{modelValue:c.value.name,"onUpdate:modelValue":s[0]||(s[0]=d=>c.value.name=d),label:"Nome do medicamento",placeholder:"Ex: Paracetamol",required:""},null,8,["modelValue"]),a(e(E),{modelValue:c.value.dosage,"onUpdate:modelValue":s[1]||(s[1]=d=>c.value.dosage=d),label:"Dosagem",placeholder:"Ex: 500mg"},null,8,["modelValue"]),a(e(E),{modelValue:c.value.frequency,"onUpdate:modelValue":s[2]||(s[2]=d=>c.value.frequency=d),label:"Frequência",placeholder:"Ex: 2x ao dia"},null,8,["modelValue"])])]),_:1},8,["model-value"]))}},ts={class:"space-y-4"},ss={class:"flex gap-2"},as=["onClick"],ls={__name:"AddAllergyModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","add"],setup(g,{emit:m}){const r=m,c=w({name:"",severity:"moderate"}),o=d=>{const y={mild:"bg-green-100 text-green-700",moderate:"bg-yellow-100 text-yellow-700",severe:"bg-red-100 text-red-700"};return y[d]||y.moderate},i=d=>({mild:"Leve",moderate:"Moderada",severe:"Grave"})[d]||"Moderada",n=()=>{c.value.name.trim()&&(r("add",{...c.value}),c.value={name:"",severity:"moderate"},r("update:modelValue",!1))},s=()=>{r("update:modelValue",!1)};return(d,y)=>(l(),k(e(Y),{"model-value":g.modelValue,"onUpdate:modelValue":y[1]||(y[1]=h=>r("update:modelValue",h)),title:"Adicionar Alergia",size:"sm"},{footer:u(()=>[a(e(M),{variant:"secondary",onClick:s},{default:u(()=>[...y[3]||(y[3]=[$(" Cancelar ",-1)])]),_:1}),a(e(M),{variant:"primary",onClick:n,disabled:!c.value.name.trim()},{default:u(()=>[...y[4]||(y[4]=[$(" Adicionar ",-1)])]),_:1},8,["disabled"])]),default:u(()=>[t("div",ts,[a(e(E),{modelValue:c.value.name,"onUpdate:modelValue":y[0]||(y[0]=h=>c.value.name=h),label:"Alergia",placeholder:"Ex: Penicilina, Amendoim",required:""},null,8,["modelValue"]),t("div",null,[y[2]||(y[2]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gravidade",-1)),t("div",ss,[(l(),p(D,null,B(["mild","moderate","severe"],h=>t("button",{key:h,onClick:V=>c.value.severity=h,class:j(["flex-1 py-2 rounded-lg font-medium transition-all",c.value.severity===h?o(h):"bg-gray-100 text-gray-600 hover:bg-gray-200"])},x(i(h)),11,as)),64))])])])]),_:1},8,["model-value"]))}},os={class:"max-w-4xl mx-auto space-y-6 animate-fade-in"},ns={class:"flex items-center justify-between"},ds={class:"flex items-center gap-2 text-sm text-gray-500"},rs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},is={__name:"FichaMedicaView",setup(g){const{medicalRecord:m,addDisease:r,removeDisease:c,userDiseases:o,addMedication:i,removeMedication:n,addAllergy:s,removeAllergy:d,updateBloodType:y,updateEmergencyContact:h,updateNotes:V,stats:_,refreshMedicalRecord:b}=he(),{activeAlerts:A,alertCount:Z,updateAlerts:ee,acknowledgeAlert:ne}=we(),P=w(!1),F=w(!1),G=w(!1),q=w(""),z=w(""),L=w(""),H=w({name:"",phone:"",relationship:""}),I=w("");be(async()=>{await b(),m.value&&(H.value={name:m.value.emergencyContact?.name||"",phone:m.value.emergencyContact?.phone||"",relationship:m.value.emergencyContact?.relationship||""},L.value=m.value.bloodType||"",I.value=m.value.notes||"",ee(m.value.medications||[]))}),N(()=>m.value?.medications,v=>{v&&ee(v)},{deep:!0}),N(m,v=>{v&&(H.value={name:v.emergencyContact?.name||"",phone:v.emergencyContact?.phone||"",relationship:v.emergencyContact?.relationship||""},L.value=v.bloodType||"",I.value=v.notes||"")},{deep:!0,immediate:!0});const de=v=>{r(v.id),T("Condição adicionada!")},re=async v=>{try{await c(v.id),T("Condição removida!")}catch(f){K(f.message)}},ie=v=>{i(v),T("Medicamento adicionado!")},ue=async v=>{try{await n(v),T("Medicamento removido!")}catch(f){K(f.message)}},ce=v=>{s(v),T("Alergia adicionada!")},me=async v=>{try{await d(v),T("Alergia removida!")}catch(f){K(f.message)}},ge=v=>{y(v),T("Tipo sanguíneo salvo!")},ve=v=>{h(v),T("Contato de emergência salvo!")},pe=v=>{V(v),T("Observações salvas!")},T=v=>{q.value=v,setTimeout(()=>{q.value=""},3e3)},K=v=>{z.value=v,setTimeout(()=>{z.value=""},5e3)};return(v,f)=>(l(),p("div",os,[t("div",ns,[f[10]||(f[10]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Ficha Médica"),t("p",{class:"text-gray-500"}," Gerencie suas condições de saúde, medicamentos e informações importantes ")],-1)),t("div",ds,[a(e(Se),{class:"w-4 h-4"}),$(" "+x(e(_).totalDiseases)+" condições ",1)])]),a(te,{name:"slide"},{default:u(()=>[q.value?(l(),k(e(ae),{key:0,variant:"success",dismissible:"",onDismiss:f[0]||(f[0]=C=>q.value="")},{default:u(()=>[$(x(q.value),1)]),_:1})):U("",!0)]),_:1}),a(te,{name:"slide"},{default:u(()=>[z.value?(l(),k(e(ae),{key:0,variant:"error",dismissible:"",onDismiss:f[1]||(f[1]=C=>z.value="")},{default:u(()=>[$(x(z.value),1)]),_:1})):U("",!0)]),_:1}),a(e(Lt),{alerts:e(A),"alert-count":e(Z),onAcknowledge:e(ne)},null,8,["alerts","alert-count","onAcknowledge"]),a(e(Fe),{stats:e(_),"blood-type":e(m)?.bloodType},null,8,["stats","blood-type"]),a(e(Ze),{diseases:e(o),onAdd:f[2]||(f[2]=C=>P.value=!0),onRemove:re},null,8,["diseases"]),a(e(ut),{medications:e(m)?.medications||[],onAdd:f[3]||(f[3]=C=>F.value=!0),onRemove:ue},null,8,["medications"]),a(e(xt),{allergies:e(m)?.allergies||[],onAdd:f[4]||(f[4]=C=>G.value=!0),onRemove:me},null,8,["allergies"]),t("div",rs,[a(e($t),{modelValue:L.value,"onUpdate:modelValue":f[5]||(f[5]=C=>L.value=C),onSave:ge},null,8,["modelValue"]),a(e(Ct),{contact:H.value,onSave:ve},null,8,["contact"])]),a(e(Mt),{modelValue:I.value,"onUpdate:modelValue":f[6]||(f[6]=C=>I.value=C),onSave:pe},null,8,["modelValue"]),a(e(Yt),{modelValue:P.value,"onUpdate:modelValue":f[7]||(f[7]=C=>P.value=C),"selected-diseases":e(m)?.diseases||[],onAdd:de},null,8,["modelValue","selected-diseases"]),a(e(es),{modelValue:F.value,"onUpdate:modelValue":f[8]||(f[8]=C=>F.value=C),onAdd:ie},null,8,["modelValue"]),a(e(ls),{modelValue:G.value,"onUpdate:modelValue":f[9]||(f[9]=C=>G.value=C),onAdd:ce},null,8,["modelValue"])]))}},Vs=xe(is,[["__scopeId","data-v-cfcb8813"]]);export{Vs as default};
