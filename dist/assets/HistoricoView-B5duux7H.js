import{c as ee,C as te,a as p,b as u,o as i,i as y,d as s,l as S,t as m,e as r,q as _,D as ae,F as N,g as P,f as o,m as le,x as se,y as oe,r as w,z as O,I as re,h as F,j as c,_ as B,B as ne,X as ie,s as de,E as ue,G as A,J as ce}from"./index-CsJlV2NR.js";import{_ as j}from"./BaseInput-BKbnDS9R.js";import{C as G}from"./chevron-down-HYmUGqu2.js";import{_ as q}from"./BaseCard-DC-Hfjqs.js";import{B as me}from"./BaseModal-EDyNIrJC.js";import{S as fe}from"./search-xEy0kDiF.js";import{C as Y}from"./calendar-Buuamd_5.js";import{P as ge}from"./plus-pY10EuYm.js";import{M as ve,B as pe,T as ye}from"./thermometer-ChLoOecQ.js";import{B as be,P as he}from"./pill-Caw8L6MW.js";import{F as xe}from"./frown-CCVKL6KV.js";const we=ee("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Se={class:"w-full"},Ve=["for"],Ce={key:0,class:"text-red-500 ml-0.5"},ke={class:"relative"},Te=["id","value","disabled","required","aria-invalid","aria-describedby"],$e={value:"",disabled:""},_e=["value"],De=["id"],Le=["id"],R={__name:"BaseSelect",props:{modelValue:{type:[String,Number],default:""},options:{type:Array,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:"Selecione uma opção"},helperText:{type:String,default:""},error:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,default:"md",validator:l=>["sm","md","lg"].includes(l)},rounded:{type:String,default:"lg",validator:l=>["none","sm","md","lg","xl"].includes(l)},optionLabel:{type:String,default:"label"},optionValue:{type:String,default:"value"},id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`}},emits:["update:modelValue","change"],setup(l,{emit:L}){const f=l,z=L,k=te(),g=p(()=>!!k["icon-left"]),b=p(()=>{const n="w-full border bg-white text-gray-900 transition-all duration-200 focus:outline-none focus:ring-2 appearance-none cursor-pointer",$={sm:"text-sm py-1.5 pr-9",md:"text-base py-2.5 pr-10",lg:"text-lg py-3 pr-12"},C={sm:g.value?"pl-9":"pl-3",md:g.value?"pl-10":"pl-4",lg:g.value?"pl-12":"pl-5"},E={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl"},M=f.error?"border-red-500 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 focus:border-teal-500 focus:ring-teal-500/20",D=f.disabled?"bg-gray-100 cursor-not-allowed opacity-60":"";return[n,$[f.size],C[f.size],E[f.rounded],M,D].join(" ")}),v=p(()=>({sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"})[f.size]),h=p(()=>({sm:"right-2.5",md:"right-3",lg:"right-4"})[f.size]),V=n=>typeof n=="string"||typeof n=="number"?n:n[f.optionLabel],x=n=>typeof n=="string"||typeof n=="number"?n:n[f.optionValue],T=n=>{z("update:modelValue",n.target.value),z("change",n.target.value)};return(n,$)=>(i(),u("div",Se,[l.label?(i(),u("label",{key:0,for:l.id,class:"block text-sm font-medium text-gray-700 mb-1.5"},[S(m(l.label)+" ",1),l.required?(i(),u("span",Ce,"*")):y("",!0)],8,Ve)):y("",!0),s("div",ke,[g.value?(i(),u("span",{key:0,class:_(["absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",v.value])},[ae(n.$slots,"icon-left")],2)):y("",!0),s("select",{id:l.id,value:l.modelValue,disabled:l.disabled,required:l.required,class:_(b.value),"aria-invalid":!!l.error,"aria-describedby":l.error?`${l.id}-error`:l.helperText?`${l.id}-helper`:void 0,onChange:T},[s("option",$e,m(l.placeholder),1),(i(!0),u(N,null,P(l.options,C=>(i(),u("option",{key:x(C),value:x(C)},m(V(C)),9,_e))),128))],42,Te),r(o(G),{class:_(["absolute top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",h.value,v.value])},null,8,["class"])]),l.helperText&&!l.error?(i(),u("p",{key:1,id:`${l.id}-helper`,class:"mt-1.5 text-sm text-gray-500"},m(l.helperText),9,De)):y("",!0),l.error?(i(),u("p",{key:2,id:`${l.id}-error`,class:"mt-1.5 text-sm text-red-600 flex items-center gap-1",role:"alert"},[$[0]||($[0]=s("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),S(" "+m(l.error),1)],8,Le)):y("",!0)]))}},ze={class:"space-y-6 animate-fade-in"},Be={class:"flex flex-col sm:flex-row gap-4"},Ee={key:0,class:"mt-4 pt-4 border-t border-gray-200"},Me={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},Ie={class:"text-sm text-gray-500"},Oe={class:"text-gray-500"},Fe={key:1,class:"space-y-6"},je=["aria-label"],qe={class:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2"},Ne={class:"space-y-3",role:"list"},Pe={class:"flex items-start gap-4"},Ue={class:"flex-1 min-w-0"},He={class:"flex items-start justify-between gap-4"},Ae={class:"font-semibold text-gray-900"},Ye={class:"text-sm text-gray-500"},Re={key:0,class:"text-gray-400"},Ge={class:"mt-3"},Je={class:"flex items-center justify-between text-sm mb-1"},Qe={class:"font-medium"},Xe={class:"h-2 bg-gray-100 rounded-full overflow-hidden"},Ke={key:0,class:"mt-3 text-sm text-gray-600 bg-gray-50 rounded-lg p-3"},We={__name:"HistoricoView",setup(l){const{symptoms:L,deleteSymptom:f,refreshSymptoms:z}=se();oe(()=>{z()});const k=w(""),g=w(""),b=w(""),v=w(""),h=w(""),V=w(!1),x=w(!1),T=w(null),n={Frown:xe,Thermometer:ye,Pill:he,Battery:pe,Brain:be,Moon:ve,Plus:ge},$={red:"bg-red-100 text-red-600",orange:"bg-orange-100 text-orange-600",yellow:"bg-yellow-100 text-yellow-600",blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",teal:"bg-teal-100 text-teal-600",indigo:"bg-indigo-100 text-indigo-600",gray:"bg-gray-100 text-gray-600"},C={1:"bg-green-500",2:"bg-lime-500",3:"bg-yellow-500",4:"bg-orange-500",5:"bg-red-500"},E=p(()=>[{value:"",label:"Todos os tipos"},...O.map(t=>({value:t.id,label:t.label}))]),M=p(()=>[{value:"",label:"Todas as intensidades"},...re.map(t=>({value:t.value.toString(),label:`${t.value} - ${t.label}`}))]),D=p(()=>{let t=[...L.value];if(k.value){const e=k.value.toLowerCase();t=t.filter(a=>O.find(H=>H.id===a.type)?.label.toLowerCase().includes(e)||a.customLabel?.toLowerCase().includes(e)||a.notes?.toLowerCase().includes(e))}return g.value&&(t=t.filter(e=>e.type===g.value)),b.value&&(t=t.filter(e=>e.intensity===parseInt(b.value))),v.value&&(t=t.filter(e=>e.date>=v.value)),h.value&&(t=t.filter(e=>e.date<=h.value)),t}),J=p(()=>{const t={};return D.value.forEach(a=>{t[a.date]||(t[a.date]=[]),t[a.date].push(a)}),Object.keys(t).sort((a,d)=>d.localeCompare(a)).map(a=>({date:a,symptoms:t[a]}))}),Q=p(()=>{let t=0;return g.value&&t++,b.value&&t++,v.value&&t++,h.value&&t++,t}),I=t=>O.find(e=>e.id===t)||{},X=t=>t.type==="outro"&&t.customLabel?t.customLabel:I(t.type).label||"Sintoma",U=t=>{const e=new Date(t+"T00:00:00"),a=new Date;a.setHours(0,0,0,0);const d=new Date(a);return d.setDate(d.getDate()-1),e.getTime()===a.getTime()?"Hoje":e.getTime()===d.getTime()?"Ontem":e.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})},K=()=>{g.value="",b.value="",v.value="",h.value=""},W=t=>{T.value=t,x.value=!0},Z=()=>{T.value&&(f(T.value.id),x.value=!1,T.value=null)};return(t,e)=>(i(),u("div",ze,[r(o(q),null,{default:c(()=>[s("div",Be,[r(o(j),{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=a=>k.value=a),type:"search",placeholder:"Buscar sintomas...",class:"flex-1"},{"icon-left":c(()=>[r(o(fe),{class:"w-5 h-5"})]),_:1},8,["modelValue"]),r(o(B),{variant:"secondary",onClick:e[1]||(e[1]=a=>V.value=!V.value),"aria-expanded":V.value},{"icon-left":c(()=>[r(o(we),{class:"w-5 h-5"})]),"icon-right":c(()=>[r(o(G),{class:_(["w-4 h-4 transition-transform",V.value?"rotate-180":""])},null,8,["class"])]),default:c(()=>[e[8]||(e[8]=S(" Filtros ",-1))]),_:1},8,["aria-expanded"])]),r(ne,{name:"slide"},{default:c(()=>[V.value?(i(),u("div",Ee,[s("div",Me,[r(o(R),{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a),label:"Tipo de sintoma",options:E.value,placeholder:"Todos os tipos"},null,8,["modelValue","options"]),r(o(R),{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=a=>b.value=a),label:"Intensidade",options:M.value,placeholder:"Todas"},null,8,["modelValue","options"]),r(o(j),{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),type:"date",label:"Data inicial"},null,8,["modelValue"]),r(o(j),{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=a=>h.value=a),type:"date",label:"Data final"},null,8,["modelValue"])]),Q.value>0?(i(),F(o(B),{key:0,variant:"link",size:"sm",class:"mt-4",onClick:K},{"icon-left":c(()=>[r(o(ie),{class:"w-4 h-4"})]),default:c(()=>[e[9]||(e[9]=S(" Limpar filtros ",-1))]),_:1})):y("",!0)])):y("",!0)]),_:1})]),_:1}),s("p",Ie,m(D.value.length)+" registro(s) encontrado(s) ",1),D.value.length===0?(i(),F(o(q),{key:0,class:"text-center py-12"},{default:c(()=>[r(o(Y),{class:"w-16 h-16 text-gray-300 mx-auto mb-4","aria-hidden":"true"}),e[10]||(e[10]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"}," Nenhum registro encontrado ",-1)),s("p",Oe,m(o(L).length===0?"Você ainda não registrou nenhum sintoma.":"Tente ajustar os filtros de busca."),1)]),_:1})):(i(),u("div",Fe,[(i(!0),u(N,null,P(J.value,a=>(i(),u("section",{key:a.date,"aria-label":`Registros de ${U(a.date)}`},[s("h2",qe,[r(o(Y),{class:"w-4 h-4","aria-hidden":"true"}),S(" "+m(U(a.date)),1)]),s("ul",Ne,[(i(!0),u(N,null,P(a.symptoms,d=>(i(),u("li",{key:d.id},[r(o(q),{hoverable:"",padding:"md"},{default:c(()=>[s("div",Pe,[s("div",{class:_(["w-12 h-12 rounded-xl flex items-center justify-center shrink-0",$[I(d.type).color]])},[(i(),F(de(n[I(d.type).icon]),{class:"w-6 h-6","aria-hidden":"true"}))],2),s("div",Ue,[s("div",He,[s("div",null,[s("h3",Ae,m(X(d)),1),s("p",Ye,[S(m(d.time)+" ",1),d.type==="outro"?(i(),u("span",Re," • Outro")):y("",!0)])]),r(o(ue),{variant:"ghost",size:"sm",label:"Excluir registro",onClick:H=>W(d)},{default:c(()=>[r(o(A),{class:"w-4 h-4 text-gray-400 hover:text-red-600"})]),_:1},8,["onClick"])]),s("div",Ge,[s("div",Je,[e[11]||(e[11]=s("span",{class:"text-gray-500"},"Intensidade",-1)),s("span",Qe,m(d.intensity)+"/5",1)]),s("div",Xe,[s("div",{class:_(["h-full rounded-full transition-all",C[d.intensity]]),style:ce({width:`${d.intensity/5*100}%`})},null,6)])]),d.notes?(i(),u("p",Ke,m(d.notes),1)):y("",!0)])])]),_:2},1024)]))),128))])],8,je))),128))])),r(o(me),{modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=a=>x.value=a),title:"Excluir registro?",size:"sm"},{footer:c(()=>[r(o(B),{variant:"secondary",onClick:e[6]||(e[6]=a=>x.value=!1)},{default:c(()=>[...e[12]||(e[12]=[S(" Cancelar ",-1)])]),_:1}),r(o(B),{variant:"danger",onClick:Z},{"icon-left":c(()=>[r(o(A),{class:"w-4 h-4"})]),default:c(()=>[e[13]||(e[13]=S(" Excluir ",-1))]),_:1})]),default:c(()=>[e[14]||(e[14]=s("p",{class:"text-gray-600"}," Esta ação não pode ser desfeita. O registro será permanentemente removido. ",-1))]),_:1},8,["modelValue"])]))}},ut=le(We,[["__scopeId","data-v-067fb413"]]);export{ut as default};
