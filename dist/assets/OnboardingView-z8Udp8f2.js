import{c as B,m as ne,u as re,r as x,a as E,b as n,d as e,e as d,f as o,S as ie,F as _,g as w,t as i,i as c,j as p,h as $,p as de,q as N,v as O,k as b,_ as L,n as y,l as ue,o as l,X as ce,s as me}from"./index-azXm5qWK.js";import{u as xe,s as ge,D as q}from"./useMedicalRecord-cQ5zGB1N.js";import{_ as k}from"./BaseCard-CuGf3w1A.js";import{C as pe}from"./calendar-DILXl9hP.js";import{S as fe}from"./search-BuxddGum.js";import{P as H}from"./phone-CzlT2lzC.js";import{C as Q}from"./check-BYW5gYeV.js";import{U as ve}from"./user-CgFNz0mo.js";const be=B("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ye=B("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const he=B("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),_e={class:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-cyan-50 flex flex-col"},we={class:"p-4 flex items-center justify-between"},ke={class:"flex items-center gap-3"},Ce={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-500 to-cyan-500 flex items-center justify-center"},De={class:"px-6 py-2"},Se={class:"flex items-center gap-2"},je={class:"text-sm text-gray-500 mt-2 text-center"},Pe={class:"flex-1 px-6 py-4 overflow-y-auto"},Ee={key:0,class:"max-w-md mx-auto animate-fade-in"},Ie={class:"text-center mb-8"},Ve={class:"w-16 h-16 rounded-2xl bg-teal-100 flex items-center justify-center mx-auto mb-4"},$e={class:"space-y-4"},Ne=["max"],Oe={key:0,class:"text-red-500 text-sm mt-1"},Be={key:0,class:"text-center p-4 bg-teal-50 rounded-xl"},Te={class:"text-teal-700"},Ue={class:"text-2xl"},Ae={key:1,class:"max-w-md mx-auto animate-fade-in"},Me={class:"text-center mb-6"},Re={class:"w-16 h-16 rounded-2xl bg-teal-100 flex items-center justify-center mx-auto mb-4"},Fe={class:"relative mb-4"},ze={key:0,class:"mb-4 bg-white rounded-xl border border-gray-200 shadow-lg max-h-60 overflow-y-auto"},Le=["onClick"],qe={class:"font-medium text-gray-900"},He={class:"text-sm text-gray-500"},Qe={key:0,class:"w-6 h-6 rounded-full bg-teal-500 flex items-center justify-center"},Ge={class:"text-sm font-medium text-gray-700 mb-3"},Je={class:"flex flex-wrap gap-2"},Xe=["onClick"],Ke={key:2,class:"text-center py-8 text-gray-500"},We={class:"mt-4"},Ye={class:"flex flex-wrap gap-2"},Ze=["onClick"],et={key:2,class:"max-w-md mx-auto animate-fade-in"},tt={class:"text-center mb-8"},st={class:"w-16 h-16 rounded-2xl bg-teal-100 flex items-center justify-center mx-auto mb-4"},at={class:"space-y-4"},lt=["value"],ot={key:0,class:"text-red-500 text-sm mt-1"},nt={key:3,class:"max-w-md mx-auto animate-fade-in"},rt={class:"text-center mb-8"},it={class:"w-16 h-16 rounded-2xl bg-red-100 flex items-center justify-center mx-auto mb-4"},dt={class:"space-y-4"},ut={class:"relative"},ct={class:"relative"},mt=["value"],xt={key:0,class:"text-red-500 text-sm mt-1"},gt={class:"flex flex-wrap gap-2"},pt=["onClick"],ft={class:"space-y-2 text-sm"},vt={class:"flex justify-between"},bt={class:"font-medium"},yt={class:"flex justify-between"},ht={class:"font-medium"},_t={class:"flex justify-between"},wt={class:"font-medium"},kt={class:"flex justify-between"},Ct={class:"font-medium"},Dt={class:"p-6 bg-white border-t border-gray-100"},St={class:"max-w-md mx-auto flex gap-3"},C=4,jt={__name:"OnboardingView",setup(Pt){const T=ue(),{updateUserProfile:U}=re(),{addDisease:G,updateEmergencyContact:J}=xe(),r=x(1),g=x(""),f=x(""),h=x(""),m=x([]),u=x({name:"",phone:"",relationship:""}),X=["Pai/Mãe","Filho(a)","Cônjuge","Irmão/Irmã","Amigo(a)","Outro"],v=x(""),D=x(""),S=x(""),A=E(()=>!h.value||h.value.length<2?[]:ge(h.value).slice(0,10)),j=E(()=>m.value.map(a=>q.find(t=>t.id===a)).filter(Boolean)),M={mental:"bg-teal-100 text-teal-700 border-teal-200",cardiovascular:"bg-red-100 text-red-700 border-red-200",respiratory:"bg-blue-100 text-blue-700 border-blue-200",endocrine:"bg-orange-100 text-orange-700 border-orange-200",neurological:"bg-indigo-100 text-indigo-700 border-indigo-200",musculoskeletal:"bg-green-100 text-green-700 border-green-200",gastrointestinal:"bg-yellow-100 text-yellow-700 border-yellow-200",dermatological:"bg-pink-100 text-pink-700 border-pink-200",immunological:"bg-teal-100 text-teal-700 border-teal-200",other:"bg-gray-100 text-gray-700 border-gray-200"},K=a=>M[a]||M.other,R=()=>{if(v.value="",!g.value)return v.value="Data de nascimento é obrigatória",!1;const a=new Date(g.value),s=Math.floor((new Date-a)/(365.25*24*60*60*1e3));return s<0||s>120?(v.value="Data de nascimento inválida",!1):!0},W=()=>{if(D.value="",!f.value)return!0;const a=f.value.replace(/\D/g,"");return a.length<10||a.length>11?(D.value="Telefone deve ter 10 ou 11 dígitos",!1):!0},F=a=>{const t=a.replace(/\D/g,"");return t.length<=2?t:t.length<=6?`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6)}`:`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`},Y=a=>{f.value=F(a.target.value)},Z=a=>{u.value.phone=F(a.target.value)},ee=()=>{if(S.value="",!u.value.phone)return!0;const a=u.value.phone.replace(/\D/g,"");return a.length<10||a.length>11?(S.value="Telefone deve ter 10 ou 11 dígitos",!1):!0},z=a=>{const t=m.value.indexOf(a);t>-1?m.value.splice(t,1):m.value.push(a)},te=a=>{const t=m.value.indexOf(a);t>-1&&m.value.splice(t,1)};E(()=>r.value===1?g.value&&!v.value:!0);const se=()=>{r.value===1&&!R()||r.value===3&&!W()||r.value===4&&!ee()||(r.value<C?r.value++:le())},ae=()=>{r.value>1&&r.value--},I=x(!1),le=async()=>{I.value=!0;try{for(const a of m.value)await G(a);(u.value.name||u.value.phone)&&await J({name:u.value.name,phone:u.value.phone.replace(/\D/g,""),relationship:u.value.relationship}),await U({birthDate:g.value,phone:f.value.replace(/\D/g,""),onboardingCompleted:!0}),T.push("/")}catch(a){console.error("Erro ao completar onboarding:",a)}finally{I.value=!1}},oe=async()=>{await U({onboardingCompleted:!0}),T.push("/")},P=E(()=>{if(!g.value)return null;const a=new Date(g.value);return Math.floor((new Date-a)/(365.25*24*60*60*1e3))});return(a,t)=>(l(),n("div",_e,[e("header",we,[e("div",ke,[e("div",Ce,[d(o(ie),{class:"w-5 h-5 text-white"})]),t[3]||(t[3]=e("span",{class:"font-semibold text-gray-900"},"Aurora Saude",-1))]),e("button",{onClick:oe,class:"text-sm text-gray-500 hover:text-gray-700 transition-colors"}," Pular ")]),e("div",De,[e("div",Se,[(l(),n(_,null,w(C,s=>e("div",{key:s,class:y(["h-2 rounded-full flex-1 transition-all duration-300",s<=r.value?"bg-teal-500":"bg-gray-200"])},null,2)),64))]),e("p",je," Passo "+i(r.value)+" de "+i(C),1)]),e("main",Pe,[r.value===1?(l(),n("div",Ee,[e("div",Ie,[e("div",Ve,[d(o(pe),{class:"w-8 h-8 text-teal-600"})]),t[4]||(t[4]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"}," Quando você nasceu? ",-1)),t[5]||(t[5]=e("p",{class:"text-gray-600"}," Essa informação ajuda a personalizar suas análises de saúde. ",-1))]),d(o(k),null,{default:p(()=>[e("div",$e,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Data de Nascimento ",-1)),N(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),type:"date",max:new Date().toISOString().split("T")[0],class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent text-lg",onBlur:R},null,40,Ne),[[O,g.value]]),v.value?(l(),n("p",Oe,i(v.value),1)):c("",!0)]),P.value!==null&&P.value>=0?(l(),n("div",Be,[e("p",Te,[t[7]||(t[7]=b(" Você tem ",-1)),e("strong",Ue,i(P.value),1),t[8]||(t[8]=b(" anos ",-1))])])):c("",!0)])]),_:1})])):c("",!0),r.value===2?(l(),n("div",Ae,[e("div",Me,[e("div",Re,[d(o(de),{class:"w-8 h-8 text-teal-600"})]),t[9]||(t[9]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"}," Suas condições de saúde ",-1)),t[10]||(t[10]=e("p",{class:"text-gray-600"}," Cadastre suas doenças ou condições para insights personalizados. ",-1))]),e("div",Fe,[d(o(fe),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),N(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>h.value=s),type:"text",placeholder:"Buscar doença (ex: diabetes, ansiedade...)",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent"},null,512),[[O,h.value]])]),A.value.length>0?(l(),n("div",ze,[(l(!0),n(_,null,w(A.value,s=>(l(),n("button",{key:s.id,onClick:V=>z(s.id),class:y(["w-full px-4 py-3 text-left flex items-center justify-between hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",m.value.includes(s.id)?"bg-teal-50":""])},[e("div",null,[e("p",qe,i(s.name),1),e("p",He,i(s.code),1)]),m.value.includes(s.id)?(l(),n("div",Qe,[d(o(Q),{class:"w-4 h-4 text-white"})])):c("",!0)],10,Le))),128))])):c("",!0),j.value.length>0?(l(),$(o(k),{key:1,class:"mb-4"},{default:p(()=>[e("h3",Ge," Condições selecionadas ("+i(j.value.length)+") ",1),e("div",Je,[(l(!0),n(_,null,w(j.value,s=>(l(),n("span",{key:s.id,class:y(["inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-medium border",K(s.category)])},[b(i(s.name)+" ",1),e("button",{onClick:V=>te(s.id),class:"ml-1 hover:opacity-70"},[d(o(ce),{class:"w-4 h-4"})],8,Xe)],2))),128))])]),_:1})):(l(),n("div",Ke,[...t[11]||(t[11]=[e("p",null,"Nenhuma condição selecionada",-1),e("p",{class:"text-sm mt-1"},"Você pode pular ou adicionar depois",-1)])])),e("div",We,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Condições comuns:",-1)),e("div",Ye,[(l(!0),n(_,null,w(o(q).filter(s=>["F32","F41","I10","E11","G43","J45"].includes(s.id)),s=>(l(),n("button",{key:s.id,onClick:V=>z(s.id),class:y(["px-3 py-1.5 rounded-full text-sm border transition-all",m.value.includes(s.id)?"bg-teal-500 text-white border-teal-500":"bg-white text-gray-700 border-gray-300 hover:border-teal-300"])},i(s.name),11,Ze))),128))])])])):c("",!0),r.value===3?(l(),n("div",et,[e("div",tt,[e("div",st,[d(o(H),{class:"w-8 h-8 text-teal-600"})]),t[13]||(t[13]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"}," Seu telefone ",-1)),t[14]||(t[14]=e("p",{class:"text-gray-600"}," Receba lembretes e notificações importantes sobre sua saúde. ",-1))]),d(o(k),null,{default:p(()=>[e("div",at,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Número de Telefone (opcional) ",-1)),e("input",{value:f.value,onInput:Y,type:"tel",placeholder:"(00) 00000-0000",maxlength:"16",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent text-lg"},null,40,lt),D.value?(l(),n("p",ot,i(D.value),1)):c("",!0),t[16]||(t[16]=e("p",{class:"text-sm text-gray-500 mt-2"}," Você pode adicionar depois nas configurações. ",-1))]),t[17]||(t[17]=e("div",{class:"p-4 bg-teal-50 rounded-xl"},[e("h4",{class:"font-medium text-teal-900 mb-2"},"Você receberá:"),e("ul",{class:"text-sm text-teal-700 space-y-1"},[e("li",null,"• Lembretes para registrar sintomas"),e("li",null,"• Alertas sobre padrões de saúde"),e("li",null,"• Dicas personalizadas")])],-1))])]),_:1})])):c("",!0),r.value===4?(l(),n("div",nt,[e("div",rt,[e("div",it,[d(o(he),{class:"w-8 h-8 text-red-600"})]),t[18]||(t[18]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"}," Contato de Emergência ",-1)),t[19]||(t[19]=e("p",{class:"text-gray-600"}," Quem devemos contatar em caso de emergência? ",-1))]),d(o(k),null,{default:p(()=>[e("div",dt,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nome do contato ",-1)),e("div",ut,[d(o(ve),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),N(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>u.value.name=s),type:"text",placeholder:"Nome completo",maxlength:"100",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent"},null,512),[[O,u.value.name]])])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Telefone do contato ",-1)),e("div",ct,[d(o(H),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e("input",{value:u.value.phone,onInput:Z,type:"tel",placeholder:"(00) 00000-0000",maxlength:"16",class:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent"},null,40,mt)]),S.value?(l(),n("p",xt,i(S.value),1)):c("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Parentesco/Relação ",-1)),e("div",gt,[(l(),n(_,null,w(X,s=>e("button",{key:s,onClick:V=>u.value.relationship=s,class:y(["px-4 py-2 rounded-xl text-sm font-medium border transition-all",u.value.relationship===s?"bg-teal-500 text-white border-teal-500":"bg-white text-gray-700 border-gray-300 hover:border-teal-300"])},i(s),11,pt)),64))])])])]),_:1}),t[28]||(t[28]=e("div",{class:"mt-4 p-4 bg-red-50 rounded-xl border border-red-100"},[e("p",{class:"text-sm text-red-700"},[e("strong",null,"Importante:"),b(" Este contato será acionado apenas em situações de emergência relacionadas à sua saúde. ")])],-1)),d(o(k),{class:"mt-4 !bg-gradient-to-r !from-teal-50 !to-cyan-50"},{default:p(()=>[t[27]||(t[27]=e("h3",{class:"font-semibold text-gray-900 mb-3"},"Resumo do seu perfil",-1)),e("div",ft,[e("div",vt,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Idade:",-1)),e("span",bt,i(P.value)+" anos",1)]),e("div",yt,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Condições:",-1)),e("span",ht,i(j.value.length)+" cadastradas",1)]),e("div",_t,[t[25]||(t[25]=e("span",{class:"text-gray-600"},"Seu telefone:",-1)),e("span",wt,i(f.value||"Não informado"),1)]),e("div",kt,[t[26]||(t[26]=e("span",{class:"text-gray-600"},"Contato emergência:",-1)),e("span",Ct,i(u.value.name||"Não informado"),1)])])]),_:1})])):c("",!0)]),e("footer",Dt,[e("div",St,[r.value>1?(l(),$(o(L),{key:0,variant:"outline",onClick:ae,class:"flex-1"},{"icon-left":p(()=>[d(o(be),{class:"w-5 h-5"})]),default:p(()=>[t[29]||(t[29]=b(" Voltar ",-1))]),_:1})):c("",!0),d(o(L),{variant:"primary",onClick:se,loading:I.value,disabled:r.value===1&&!g.value,class:y(r.value===1?"flex-1":"flex-[2]")},{"icon-right":p(()=>[(l(),$(me(r.value===C?o(Q):o(ye)),{class:"w-5 h-5"}))]),default:p(()=>[b(i(r.value===C?"Concluir":"Continuar")+" ",1)]),_:1},8,["loading","disabled","class"])])])]))}},Ut=ne(jt,[["__scopeId","data-v-eedfb139"]]);export{Ut as default};
