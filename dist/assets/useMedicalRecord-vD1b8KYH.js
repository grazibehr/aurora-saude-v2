import{a as v,r as f,Y as m,V as y,Z as C,P as A,Q as K}from"./index-CsJlV2NR.js";const V=[{id:"mental",label:"Saúde Mental",color:"teal"},{id:"cardiovascular",label:"Cardiovascular",color:"red"},{id:"respiratory",label:"Respiratório",color:"blue"},{id:"endocrine",label:"Endócrino/Metabólico",color:"orange"},{id:"neurological",label:"Neurológico",color:"indigo"},{id:"musculoskeletal",label:"Musculoesquelético",color:"green"},{id:"gastrointestinal",label:"Gastrointestinal",color:"yellow"},{id:"dermatological",label:"Dermatológico",color:"pink"},{id:"immunological",label:"Imunológico",color:"teal"},{id:"other",label:"Outras",color:"gray"}],b=[{id:"F32",code:"F32",name:"Depressão",category:"mental",commonSymptoms:["fadiga","insonia","ansiedade"]},{id:"F41",code:"F41",name:"Transtorno de Ansiedade Generalizada",category:"mental",commonSymptoms:["ansiedade","insonia","dor"]},{id:"F41.0",code:"F41.0",name:"Transtorno de Pânico",category:"mental",commonSymptoms:["ansiedade","dor"]},{id:"F41.1",code:"F41.1",name:"Ansiedade Generalizada",category:"mental",commonSymptoms:["ansiedade","insonia"]},{id:"F31",code:"F31",name:"Transtorno Bipolar",category:"mental",commonSymptoms:["insonia","fadiga","ansiedade"]},{id:"F20",code:"F20",name:"Esquizofrenia",category:"mental",commonSymptoms:["insonia","ansiedade"]},{id:"F42",code:"F42",name:"Transtorno Obsessivo-Compulsivo (TOC)",category:"mental",commonSymptoms:["ansiedade","insonia"]},{id:"F43.1",code:"F43.1",name:"Transtorno de Estresse Pós-Traumático",category:"mental",commonSymptoms:["ansiedade","insonia","fadiga"]},{id:"F50.0",code:"F50.0",name:"Anorexia Nervosa",category:"mental",commonSymptoms:["fadiga","enjoo"]},{id:"F50.2",code:"F50.2",name:"Bulimia Nervosa",category:"mental",commonSymptoms:["enjoo","fadiga"]},{id:"F90",code:"F90",name:"TDAH - Déficit de Atenção e Hiperatividade",category:"mental",commonSymptoms:["ansiedade","insonia"]},{id:"F33",code:"F33",name:"Transtorno Depressivo Recorrente",category:"mental",commonSymptoms:["fadiga","insonia","ansiedade"]},{id:"F40",code:"F40",name:"Fobias",category:"mental",commonSymptoms:["ansiedade"]},{id:"F51",code:"F51",name:"Distúrbios do Sono",category:"mental",commonSymptoms:["insonia","fadiga"]},{id:"I10",code:"I10",name:"Hipertensão Arterial",category:"cardiovascular",commonSymptoms:["dor","fadiga"]},{id:"I25",code:"I25",name:"Doença Cardíaca Isquêmica",category:"cardiovascular",commonSymptoms:["dor","fadiga"]},{id:"I50",code:"I50",name:"Insuficiência Cardíaca",category:"cardiovascular",commonSymptoms:["fadiga","dor"]},{id:"I20",code:"I20",name:"Angina",category:"cardiovascular",commonSymptoms:["dor"]},{id:"I48",code:"I48",name:"Arritmia Cardíaca",category:"cardiovascular",commonSymptoms:["fadiga","ansiedade"]},{id:"I83",code:"I83",name:"Varizes",category:"cardiovascular",commonSymptoms:["dor","fadiga"]},{id:"J45",code:"J45",name:"Asma",category:"respiratory",commonSymptoms:["fadiga","ansiedade"]},{id:"J44",code:"J44",name:"DPOC - Doença Pulmonar Obstrutiva Crônica",category:"respiratory",commonSymptoms:["fadiga"]},{id:"J30",code:"J30",name:"Rinite Alérgica",category:"respiratory",commonSymptoms:["dor","fadiga"]},{id:"J32",code:"J32",name:"Sinusite Crônica",category:"respiratory",commonSymptoms:["dor"]},{id:"J40",code:"J40",name:"Bronquite",category:"respiratory",commonSymptoms:["fadiga","febre"]},{id:"G47.3",code:"G47.3",name:"Apneia do Sono",category:"respiratory",commonSymptoms:["fadiga","insonia"]},{id:"E11",code:"E11",name:"Diabetes Tipo 2",category:"endocrine",commonSymptoms:["fadiga","enjoo"]},{id:"E10",code:"E10",name:"Diabetes Tipo 1",category:"endocrine",commonSymptoms:["fadiga","enjoo"]},{id:"E03",code:"E03",name:"Hipotireoidismo",category:"endocrine",commonSymptoms:["fadiga","dor"]},{id:"E05",code:"E05",name:"Hipertireoidismo",category:"endocrine",commonSymptoms:["ansiedade","insonia","fadiga"]},{id:"E66",code:"E66",name:"Obesidade",category:"endocrine",commonSymptoms:["fadiga","dor"]},{id:"E78",code:"E78",name:"Colesterol Alto",category:"endocrine",commonSymptoms:["fadiga"]},{id:"E28",code:"E28",name:"Síndrome dos Ovários Policísticos",category:"endocrine",commonSymptoms:["dor","ansiedade"]},{id:"G43",code:"G43",name:"Enxaqueca",category:"neurological",commonSymptoms:["dor","enjoo"]},{id:"G40",code:"G40",name:"Epilepsia",category:"neurological",commonSymptoms:["fadiga"]},{id:"G35",code:"G35",name:"Esclerose Múltipla",category:"neurological",commonSymptoms:["fadiga","dor"]},{id:"G20",code:"G20",name:"Parkinson",category:"neurological",commonSymptoms:["fadiga","insonia"]},{id:"G30",code:"G30",name:"Alzheimer",category:"neurological",commonSymptoms:["insonia","ansiedade"]},{id:"G44",code:"G44",name:"Cefaleia Tensional",category:"neurological",commonSymptoms:["dor"]},{id:"G25.81",code:"G25.81",name:"Síndrome das Pernas Inquietas",category:"neurological",commonSymptoms:["insonia","dor"]},{id:"M54",code:"M54",name:"Dor nas Costas (Lombalgia)",category:"musculoskeletal",commonSymptoms:["dor"]},{id:"M79.7",code:"M79.7",name:"Fibromialgia",category:"musculoskeletal",commonSymptoms:["dor","fadiga","insonia"]},{id:"M05",code:"M05",name:"Artrite Reumatoide",category:"musculoskeletal",commonSymptoms:["dor","fadiga"]},{id:"M15",code:"M15",name:"Artrose/Osteoartrite",category:"musculoskeletal",commonSymptoms:["dor"]},{id:"M81",code:"M81",name:"Osteoporose",category:"musculoskeletal",commonSymptoms:["dor"]},{id:"M75",code:"M75",name:"Tendinite/Bursite",category:"musculoskeletal",commonSymptoms:["dor"]},{id:"M50",code:"M50",name:"Hérnia de Disco",category:"musculoskeletal",commonSymptoms:["dor"]},{id:"K21",code:"K21",name:"Refluxo Gastroesofágico",category:"gastrointestinal",commonSymptoms:["dor","enjoo"]},{id:"K58",code:"K58",name:"Síndrome do Intestino Irritável",category:"gastrointestinal",commonSymptoms:["dor","enjoo"]},{id:"K29",code:"K29",name:"Gastrite",category:"gastrointestinal",commonSymptoms:["dor","enjoo"]},{id:"K50",code:"K50",name:"Doença de Crohn",category:"gastrointestinal",commonSymptoms:["dor","fadiga","enjoo"]},{id:"K51",code:"K51",name:"Colite Ulcerativa",category:"gastrointestinal",commonSymptoms:["dor","fadiga"]},{id:"K80",code:"K80",name:"Pedra na Vesícula",category:"gastrointestinal",commonSymptoms:["dor","enjoo"]},{id:"K90",code:"K90",name:"Doença Celíaca",category:"gastrointestinal",commonSymptoms:["dor","fadiga","enjoo"]},{id:"E73",code:"E73",name:"Intolerância à Lactose",category:"gastrointestinal",commonSymptoms:["dor","enjoo"]},{id:"L40",code:"L40",name:"Psoríase",category:"dermatological",commonSymptoms:["dor","ansiedade"]},{id:"L20",code:"L20",name:"Dermatite Atópica/Eczema",category:"dermatological",commonSymptoms:["dor","insonia"]},{id:"L50",code:"L50",name:"Urticária",category:"dermatological",commonSymptoms:["ansiedade"]},{id:"L70",code:"L70",name:"Acne",category:"dermatological",commonSymptoms:["ansiedade"]},{id:"L63",code:"L63",name:"Alopecia",category:"dermatological",commonSymptoms:["ansiedade"]},{id:"M32",code:"M32",name:"Lúpus",category:"immunological",commonSymptoms:["fadiga","dor","febre"]},{id:"D50",code:"D50",name:"Anemia",category:"immunological",commonSymptoms:["fadiga"]},{id:"D69",code:"D69",name:"Púrpura",category:"immunological",commonSymptoms:["fadiga"]},{id:"B20",code:"B20",name:"HIV/AIDS",category:"immunological",commonSymptoms:["fadiga","febre"]},{id:"N18",code:"N18",name:"Doença Renal Crônica",category:"other",commonSymptoms:["fadiga","enjoo"]},{id:"N40",code:"N40",name:"Hiperplasia Prostática",category:"other",commonSymptoms:["dor"]},{id:"N94",code:"N94",name:"Endometriose",category:"other",commonSymptoms:["dor","fadiga"]},{id:"R53",code:"R53",name:"Fadiga Crônica",category:"other",commonSymptoms:["fadiga","dor","insonia"]},{id:"H81",code:"H81",name:"Labirintite/Vertigem",category:"other",commonSymptoms:["enjoo","ansiedade"]},{id:"H25",code:"H25",name:"Catarata",category:"other",commonSymptoms:["dor"]},{id:"H40",code:"H40",name:"Glaucoma",category:"other",commonSymptoms:["dor"]}];function U(n){return b.filter(t=>t.category===n)}function p(n){return b.find(t=>t.id===n)}function Y(n){const t=n.toLowerCase();return b.filter(r=>r.name.toLowerCase().includes(t)||r.code.toLowerCase().includes(t))}function O(n){const t=new Map;return n.forEach(r=>{const c=p(r);c&&c.commonSymptoms.forEach(g=>{t.set(g,(t.get(g)||0)+1)})}),Array.from(t.entries()).sort((r,c)=>c[1]-r[1]).map(([r,c])=>({symptom:r,count:c}))}const w="aurora_medical_record",E={diseases:[],medications:[],allergies:[],bloodType:"",emergencyContact:{name:"",phone:"",relationship:""},notes:"",updatedAt:null},P=n=>typeof n=="string"?{cidCode:n,dbId:null}:n,S=n=>typeof n=="string"?n:n?.cidCode||n?.cid_code;function x(n){return!(typeof n!="object"||n===null||!Array.isArray(n.diseases)||!Array.isArray(n.medications)||!Array.isArray(n.allergies))}const o=f(null),h=f(!1),M=f(null),u=f(!1),N=()=>{const n=K(w,null,x);o.value=n||{...E}};N();const q=async()=>{h.value=!0,M.value=null;try{const n=await y.getMedicalRecord();if(n.ok){const t=n.medical_record||{},r=(n.diseases||[]).map(s=>({cidCode:s.cid_code,dbId:s.id,name:s.disease_name})),c=(n.medications||[]).map(s=>({id:s.id,name:s.name,dosage:s.dosage||"",frequency:s.frequency||"",notes:s.notes||"",active:s.active})),g=(n.allergies||[]).map(s=>({id:s.id,name:s.allergen,severity:s.severity||"moderate",notes:s.notes||""}));o.value={diseases:r,medications:c,allergies:g,bloodType:t.blood_type||"",emergencyContact:{name:t.emergency_contact_name||"",phone:t.emergency_contact_phone||"",relationship:t.emergency_contact_relationship||""},notes:t.observations||"",updatedAt:t.updated_at},u.value=!1,A(w,o.value)}else throw new Error("API response invalid")}catch(n){console.warn("API indisponivel, usando localStorage:",n.message),u.value=!0}finally{h.value=!1}},l=async()=>{if(o.value.updatedAt=new Date().toISOString(),A(w,o.value),!u.value)try{await y.updateMedicalRecord({diseases:o.value.diseases,medications:o.value.medications,allergies:o.value.allergies,blood_type:o.value.bloodType,emergency_contact:o.value.emergencyContact,notes:o.value.notes})}catch(n){console.warn("Erro ao sincronizar com backend:",n.message)}};function Q(){const n=e=>o.value.diseases.some(a=>S(a)===e),t=async e=>{if(!n(e)){const a=p(e);if(a){let i=null;try{const d=await y.addDiseaseToRecord({name:a.name,code:a.code});d.ok&&d.disease&&(i=d.disease.id),u.value=!1}catch(d){console.warn("Adicionando doenca localmente:",d.message),u.value=!0}o.value.diseases.push({cidCode:e,dbId:i,name:a.name}),await l()}}},r=async e=>{const a=typeof e=="string"?e:e?.cidCode,i=o.value.diseases.findIndex(d=>S(d)===a);if(i>-1){const d=P(o.value.diseases[i]);if(d.dbId)try{await y.removeDiseaseFromRecord(d.dbId),o.value.diseases.splice(i,1),await l()}catch(H){throw console.error("Erro ao remover doença:",H.message),new Error("Não foi possível remover a condição. Tente novamente.")}else o.value.diseases.splice(i,1),await l()}},c=v(()=>o.value.diseases.map(e=>{const a=S(e),i=p(a);return i?{...i,dbId:e.dbId}:typeof e=="object"&&e.name?{id:e.cidCode,code:e.cidCode,name:e.name,dbId:e.dbId,category:"other"}:null}).filter(Boolean)),g=async e=>{const a={id:C(),name:m(e.name,100),dosage:m(e.dosage||"",50),frequency:m(e.frequency||"",50),notes:m(e.notes||"",200),createdAt:new Date().toISOString()};try{const i=await y.addMedication({name:a.name,dosage:a.dosage,frequency:a.frequency,notes:a.notes});i.ok&&i.medication&&(a.id=i.medication.id)}catch(i){console.warn("Adicionando medicamento localmente:",i.message)}return o.value.medications.push(a),await l(),a},s=async e=>{const a=o.value.medications.findIndex(i=>i.id===e);if(a>-1)try{await y.removeMedication(e),o.value.medications.splice(a,1),await l()}catch(i){throw console.error("Erro ao remover medicamento:",i.message),new Error("Não foi possível remover o medicamento. Tente novamente.")}},I=async(e,a)=>{const i=o.value.medications.findIndex(d=>d.id===e);i>-1&&(o.value.medications[i]={...o.value.medications[i],...a},await l())},D=async e=>{const a={id:C(),name:m(e.name,100),severity:e.severity||"moderate",notes:m(e.notes||"",200),createdAt:new Date().toISOString()};try{const i=await y.addAllergy({name:a.name,severity:a.severity,notes:a.notes});i.ok&&i.allergy&&(a.id=i.allergy.id)}catch(i){console.warn("Adicionando alergia localmente:",i.message)}return o.value.allergies.push(a),await l(),a},F=async e=>{const a=o.value.allergies.findIndex(i=>i.id===e);if(a>-1)try{await y.removeAllergy(e),o.value.allergies.splice(a,1),await l()}catch(i){throw console.error("Erro ao remover alergia:",i.message),new Error("Não foi possível remover a alergia. Tente novamente.")}},T=async e=>{o.value.bloodType=m(e,10),await l();try{await y.updateMedicalInfo({bloodType:o.value.bloodType,emergencyContact:o.value.emergencyContact,notes:o.value.notes})}catch(a){console.warn("Erro ao sincronizar tipo sanguíneo:",a.message)}},R=async e=>{o.value.emergencyContact={name:m(e.name||"",100),phone:m(e.phone||"",20),relationship:m(e.relationship||"",50)},await l();try{await y.updateMedicalInfo({bloodType:o.value.bloodType,emergencyContact:o.value.emergencyContact,notes:o.value.notes})}catch(a){console.warn("Erro ao sincronizar contato de emergência:",a.message)}},G=async e=>{o.value.notes=m(e,1e3),await l();try{await y.updateMedicalInfo({bloodType:o.value.bloodType,emergencyContact:o.value.emergencyContact,notes:o.value.notes})}catch(a){console.warn("Erro ao sincronizar observações:",a.message)}},L=v(()=>O(o.value.diseases)),_=e=>o.value.diseases.some(a=>p(a)?.commonSymptoms?.includes(e)),j=e=>c.value.filter(a=>a.commonSymptoms?.includes(e)),k=v(()=>({totalDiseases:o.value.diseases.length,totalMedications:o.value.medications.length,totalAllergies:o.value.allergies.length,hasMentalHealth:c.value.some(e=>e.category==="mental"),hasChronicCondition:o.value.diseases.length>0,lastUpdated:o.value.updatedAt}));return{medicalRecord:o,isLoading:h,error:M,addDisease:t,removeDisease:r,userDiseases:c,addMedication:g,removeMedication:s,updateMedication:I,addAllergy:D,removeAllergy:F,updateBloodType:T,updateEmergencyContact:R,updateNotes:G,expectedSymptoms:L,isSymptomRelatedToConditions:_,getRelatedDiseases:j,stats:k,refreshMedicalRecord:async()=>{await q()},resetMedicalRecord:()=>{o.value={...E}}}}export{b as D,V as a,U as g,Y as s,Q as u};
