import{c as E,a as h,b as w,o as v,i as U,n as P,t as x,m as ee,u as te,x as ae,A as se,r as y,e as s,j as o,B as L,f as t,h as j,k as d,d as a,w as oe,_ as V,X as le,G as F}from"./index-azXm5qWK.js";import{_ as H}from"./BaseInput-B5gqF_3A.js";import{_ as A}from"./BaseCard-CuGf3w1A.js";import{B as re}from"./BaseModal-DMUDUi05.js";import{_ as O}from"./BaseAlert-CrdZ_00x.js";import{U as ne}from"./user-CgFNz0mo.js";import{M as ie}from"./mail-XuM2To4j.js";import{I as de}from"./info-D5aF7pvg.js";import{C as N}from"./check-BYW5gYeV.js";const ue=E("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const me=E("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const ce=E("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);const fe=E("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const ve=E("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ge={class:"relative inline-flex shrink-0"},pe=["src","alt"],xe=["aria-label"],ye=["aria-label"],he={__name:"BaseAvatar",props:{src:{type:String,default:""},alt:{type:String,default:""},name:{type:String,default:""},size:{type:String,default:"md",validator:n=>["xs","sm","md","lg","xl","2xl"].includes(n)},rounded:{type:String,default:"full",validator:n=>["md","lg","xl","full"].includes(n)},color:{type:String,default:"teal",validator:n=>["teal","blue","green","red","yellow","gray"].includes(n)},status:{type:String,default:null,validator:n=>["online","offline","busy","away"].includes(n)}},setup(n){const r=n,$=h(()=>{if(!r.name)return"?";const i=r.name.trim().split(" ");return i.length===1?i[0].charAt(0).toUpperCase():(i[0].charAt(0)+i[i.length-1].charAt(0)).toUpperCase()}),k=h(()=>({xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-16 h-16 text-xl","2xl":"w-20 h-20 text-2xl"})[r.size]),D=h(()=>({md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-full"})[r.rounded]),b=h(()=>({teal:"bg-teal-100 text-teal-700",blue:"bg-blue-100 text-blue-700",green:"bg-green-100 text-green-700",red:"bg-red-100 text-red-700",yellow:"bg-yellow-100 text-yellow-700",gray:"bg-gray-100 text-gray-700"})[r.color]),S=h(()=>({online:"bg-green-500",offline:"bg-gray-400",busy:"bg-red-500",away:"bg-yellow-500"})[r.status]),C=h(()=>({xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3",xl:"w-4 h-4","2xl":"w-5 h-5"})[r.size]);return(i,_)=>(v(),w("div",ge,[n.src?(v(),w("img",{key:0,src:n.src,alt:n.alt||n.name,class:P(["object-cover",k.value,D.value])},null,10,pe)):(v(),w("div",{key:1,class:P(["flex items-center justify-center font-semibold",k.value,D.value,b.value]),"aria-label":n.name},x($.value),11,xe)),n.status?(v(),w("span",{key:2,class:P(["absolute bottom-0 right-0 rounded-full ring-2 ring-white",S.value,C.value]),"aria-label":`Status: ${n.status}`},null,10,ye)):U("",!0)]))}},we={class:"max-w-2xl mx-auto space-y-6 animate-fade-in"},be={class:"flex items-center gap-4"},ke={class:"relative group"},Se={key:0,class:"w-16 h-16 rounded-full overflow-hidden ring-4 ring-teal-100"},Ce=["src"],_e=["disabled"],ze={class:"text-sm text-gray-500"},Ve={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},Ae={class:"space-y-4"},Ee={class:"flex items-center justify-between p-4 bg-gray-50 rounded-xl"},De={class:"text-2xl font-bold text-teal-600"},Me={class:"text-sm text-gray-500 flex items-start gap-2"},Ie={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},Te={class:"space-y-4"},Ne={class:"space-y-2 text-sm text-gray-600"},Ue={class:"flex items-center gap-2"},$e={class:"flex items-center gap-2"},Be={class:"flex items-center gap-2"},Pe={class:"flex items-center gap-2"},je={class:"text-lg font-semibold text-red-600 flex items-center gap-2"},Fe={class:"text-sm text-gray-500 space-y-1"},Oe={class:"text-gray-600"},Re={__name:"ConfiguracoesView",setup(n){const{user:r,updateUser:$,updateUserProfile:k,logout:D}=te(),{symptoms:b}=ae(),{addNotification:S,NOTIFICATION_TYPES:C}=se(),i=y(r.value?.name||""),_=y(r.value?.email||""),f=y(""),c=y(""),M=y(!1),I=y(null),B=y(!1),q=h(()=>i.value!==r.value?.name||_.value!==r.value?.email),J=()=>{f.value="",c.value="";try{$({name:i.value,email:_.value}),c.value="Perfil atualizado com sucesso!",S({type:C.ACHIEVEMENT,title:"Perfil atualizado",message:"Suas informações de perfil foram salvas com sucesso."}),setTimeout(()=>{c.value=""},3e3)}catch(u){f.value=u.message||"Erro ao atualizar perfil"}},Y=()=>{const u={user:r.value,symptoms:b.value,exportedAt:new Date().toISOString()},e=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),l=URL.createObjectURL(e),m=document.createElement("a");m.href=l,m.download=`aurora-saude-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(l),S({type:C.ACHIEVEMENT,title:"Dados exportados",message:`Backup com ${b.value.length} registros foi baixado com sucesso.`}),c.value="Dados exportados com sucesso!",setTimeout(()=>{c.value=""},3e3)},G=()=>{localStorage.removeItem("aurora_symptoms"),localStorage.removeItem("aurora_user"),D()},X=u=>u?new Date(u).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):"N/A",R=()=>{I.value?.click()},Z=async u=>{const e=u.target.files?.[0];if(e){if(!e.type.startsWith("image/")){f.value="Por favor, selecione uma imagem válida";return}if(e.size>2*1024*1024){f.value="A imagem deve ter no máximo 2MB";return}B.value=!0,f.value="";try{const l=await Q(e),m=await W(l,200,200);await k({avatar:m}),c.value="Foto de perfil atualizada!",S({type:C.ACHIEVEMENT,title:"Foto atualizada",message:"Sua foto de perfil foi alterada com sucesso."}),setTimeout(()=>{c.value=""},3e3)}catch(l){f.value="Erro ao salvar foto. Tente novamente.",console.error("Erro ao salvar avatar:",l)}finally{B.value=!1,I.value&&(I.value.value="")}}},K=async()=>{try{await k({avatar:null}),c.value="Foto de perfil removida!",setTimeout(()=>{c.value=""},3e3)}catch(u){f.value="Erro ao remover foto.",console.error("Erro ao remover avatar:",u)}},Q=u=>new Promise((e,l)=>{const m=new FileReader;m.onload=()=>e(m.result),m.onerror=l,m.readAsDataURL(u)}),W=(u,e,l)=>new Promise(m=>{const z=new Image;z.onload=()=>{const T=document.createElement("canvas");let g=z.width,p=z.height;g>p?g>e&&(p=p*e/g,g=e):p>l&&(g=g*l/p,p=l),T.width=g,T.height=p,T.getContext("2d").drawImage(z,0,0,g,p),m(T.toDataURL("image/jpeg",.8))},z.src=u});return(u,e)=>(v(),w("div",we,[s(L,{name:"slide"},{default:o(()=>[c.value?(v(),j(t(O),{key:0,variant:"success",dismissible:"",onDismiss:e[0]||(e[0]=l=>c.value="")},{default:o(()=>[d(x(c.value),1)]),_:1})):U("",!0)]),_:1}),s(L,{name:"slide"},{default:o(()=>[f.value?(v(),j(t(O),{key:0,variant:"error",dismissible:"",onDismiss:e[1]||(e[1]=l=>f.value="")},{default:o(()=>[d(x(f.value),1)]),_:1})):U("",!0)]),_:1}),s(t(A),null,{header:o(()=>[a("div",be,[a("div",ke,[t(r)?.avatar?(v(),w("div",Se,[a("img",{src:t(r).avatar,alt:"Foto de perfil",class:"w-full h-full object-cover"},null,8,Ce)])):(v(),j(t(he),{key:1,name:t(r)?.name,size:"xl",color:"teal"},null,8,["name"])),a("button",{onClick:R,disabled:B.value,class:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer"},[s(t(ue),{class:"w-6 h-6 text-white"})],8,_e),t(r)?.avatar?(v(),w("button",{key:2,onClick:K,class:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white shadow-lg hover:bg-red-600 transition-colors"},[s(t(le),{class:"w-4 h-4"})])):U("",!0)]),a("input",{ref_key:"fileInput",ref:I,type:"file",accept:"image/*",class:"hidden",onChange:Z},null,544),a("div",null,[e[7]||(e[7]=a("h2",{class:"text-xl font-semibold text-gray-900"}," Meu Perfil ",-1)),a("p",ze," Membro desde "+x(X(t(r)?.createdAt)),1),a("button",{onClick:R,class:"text-sm text-teal-600 hover:text-teal-700 font-medium mt-1"},x(t(r)?.avatar?"Alterar foto":"Adicionar foto"),1)])])]),default:o(()=>[a("form",{onSubmit:oe(J,["prevent"]),class:"space-y-4"},[s(t(H),{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=l=>i.value=l),label:"Nome completo",placeholder:"Seu nome",required:"",minlength:2,maxlength:100},{"icon-left":o(()=>[s(t(ne),{class:"w-5 h-5"})]),_:1},8,["modelValue"]),s(t(H),{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=l=>_.value=l),type:"email",label:"E-mail",placeholder:"seu@email.com",required:""},{"icon-left":o(()=>[s(t(ie),{class:"w-5 h-5"})]),_:1},8,["modelValue"]),s(t(V),{type:"submit",variant:"primary",size:"lg","full-width":"",disabled:!q.value},{"icon-left":o(()=>[s(t(fe),{class:"w-5 h-5"})]),default:o(()=>[e[8]||(e[8]=d(" Salvar alterações ",-1))]),_:1},8,["disabled"])],32)]),_:1}),s(t(A),null,{header:o(()=>[a("h2",Ve,[s(t(me),{class:"w-5 h-5 text-gray-400"}),e[9]||(e[9]=d(" Seus Dados ",-1))])]),default:o(()=>[a("div",Ae,[a("div",Ee,[e[10]||(e[10]=a("div",null,[a("p",{class:"font-medium text-gray-900"},"Total de registros"),a("p",{class:"text-sm text-gray-500"},"Sintomas registrados no sistema")],-1)),a("span",De,x(t(b).length),1)]),s(t(V),{variant:"secondary",size:"lg","full-width":"",onClick:Y},{"icon-left":o(()=>[s(t(ce),{class:"w-5 h-5"})]),default:o(()=>[e[11]||(e[11]=d(" Exportar meus dados ",-1))]),_:1}),a("p",Me,[s(t(de),{class:"w-4 h-4 shrink-0 mt-0.5","aria-hidden":"true"}),e[12]||(e[12]=d(" Seus dados serão baixados em formato JSON, que pode ser importado posteriormente. ",-1))])])]),_:1}),s(t(A),null,{header:o(()=>[a("h2",Ie,[s(t(ve),{class:"w-5 h-5 text-gray-400"}),e[13]||(e[13]=d(" Privacidade e Segurança ",-1))])]),default:o(()=>[a("div",Te,[s(t(O),{variant:"success",title:"Seus dados estão seguros"},{default:o(()=>[...e[14]||(e[14]=[d(" Todas as informações são armazenadas localmente no seu navegador. Nenhum dado é enviado para servidores externos. ",-1)])]),_:1}),a("ul",Ne,[a("li",Ue,[s(t(N),{class:"w-4 h-4 text-green-500","aria-hidden":"true"}),e[15]||(e[15]=d(" Armazenamento 100% local ",-1))]),a("li",$e,[s(t(N),{class:"w-4 h-4 text-green-500","aria-hidden":"true"}),e[16]||(e[16]=d(" Nenhum rastreamento ",-1))]),a("li",Be,[s(t(N),{class:"w-4 h-4 text-green-500","aria-hidden":"true"}),e[17]||(e[17]=d(" Dados criptografados pelo navegador ",-1))]),a("li",Pe,[s(t(N),{class:"w-4 h-4 text-green-500","aria-hidden":"true"}),e[18]||(e[18]=d(" Controle total sobre suas informações ",-1))])])])]),_:1}),s(t(A),{variant:"outlined",class:"!border-2 !border-red-200"},{header:o(()=>[a("h2",je,[s(t(F),{class:"w-5 h-5"}),e[19]||(e[19]=d(" Zona de Perigo ",-1))])]),default:o(()=>[e[21]||(e[21]=a("p",{class:"text-gray-600 mb-4"}," Ao excluir sua conta, todos os seus dados serão permanentemente removidos. Esta ação não pode ser desfeita. ",-1)),s(t(V),{variant:"danger",size:"lg","full-width":"",onClick:e[4]||(e[4]=l=>M.value=!0)},{"icon-left":o(()=>[s(t(F),{class:"w-5 h-5"})]),default:o(()=>[e[20]||(e[20]=d(" Excluir minha conta e dados ",-1))]),_:1})]),_:1}),s(t(A),{class:"!bg-gradient-to-r !from-teal-50 !to-cyan-50"},{header:o(()=>[...e[22]||(e[22]=[a("h2",{class:"text-lg font-semibold text-gray-900"}," Sobre o Aurora Saúde ",-1)])]),default:o(()=>[e[25]||(e[25]=a("p",{class:"text-gray-600 mb-4"},' O Aurora Saúde é um sistema de monitoramento de saúde desenvolvido como MVP para a disciplina "Desenvolvimento FullStack Básico" da PUC-Rio. ',-1)),a("div",Fe,[e[23]||(e[23]=a("p",null,"Versão: 2.0.0",-1)),e[24]||(e[24]=a("p",null,"Desenvolvido com Vue 3 + Tailwind CSS",-1)),a("p",null,"© "+x(new Date().getFullYear())+" - Todos os direitos reservados",1)])]),_:1}),s(t(re),{modelValue:M.value,"onUpdate:modelValue":e[6]||(e[6]=l=>M.value=l),title:"Excluir conta?",size:"sm"},{footer:o(()=>[s(t(V),{variant:"secondary",onClick:e[5]||(e[5]=l=>M.value=!1)},{default:o(()=>[...e[26]||(e[26]=[d(" Cancelar ",-1)])]),_:1}),s(t(V),{variant:"danger",onClick:G},{"icon-left":o(()=>[s(t(F),{class:"w-4 h-4"})]),default:o(()=>[e[27]||(e[27]=d(" Sim, excluir tudo ",-1))]),_:1})]),default:o(()=>[a("p",Oe," Esta ação irá excluir permanentemente sua conta e todos os "+x(t(b).length)+" registros de sintomas. Não será possível recuperar essas informações. ",1)]),_:1},8,["modelValue"])]))}},We=ee(Re,[["__scopeId","data-v-12c829e6"]]);export{We as default};
